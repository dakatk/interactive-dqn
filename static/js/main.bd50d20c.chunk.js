(this["webpackJsonpinteractive-dqn"]=this["webpackJsonpinteractive-dqn"]||[]).push([[0],{251:function(e){e.exports=JSON.parse('{"classes":{"S":"cell-bg-start","F":"cell-bg-frozen","H":"cell-bg-hole","G":"cell-bg-goal"},"titles":{"S":"Start","F":"Frozen","H":"Hole","G":"Goal"}}')},252:function(e){e.exports=JSON.parse('{"parentRoutes":["/","/app/","/interactive-dqn/"],"frozenLake":{"url":"/frozen-lake","dqnParams":{"batchSize":1500,"gamma":0.9,"layers":[{"units":4,"inputShape":16,"activation":"relu"}]}},"ticTacToe":{"url":"/tic-tac-toe","dqnParams":{"batchSize":200,"gamma":0.9,"layers":[{"units":9,"inputShape":9,"activation":"relu"}]}},"snake":{"url":"/snake","dqnParams":{"batchSize":2000,"gamma":0.9,"layers":[{"units":4,"inputShape":8,"activation":"relu"}]}}}')},296:function(e){e.exports=JSON.parse('[{"title":"Welcome","route":"/","content":"Home"},{"title":"Frozen Lake","route":"/frozen-lake","content":"Frozen Lake"},{"title":"Tic Tac Toe","route":"/tic-tac-toe","content":"Tic Tac Toe"},{"title":"Snake","route":"/snake","content":"Snake"}]')},321:function(e){e.exports=JSON.parse('{"step":[{"label":"Epsilon","props":{"name":"epsilon","id":"epsilon","type":"number","max":1,"min":0,"step":0.1,"placeholder":0,"title":"Probability of random action vs best known action"}},{"label":"Batch Size","props":{"name":"batchSize","id":"batchSize","type":"number","max":200,"min":10,"step":2,"placeholder":10,"title":"Amount of data sampled from replay buffer when training"}},{"label":"Update","props":{"name":"updateTarget","id":"updateTarget","type":"checkbox","title":"Choose to update target network on step"}}],"episode":[{"label":"Max Steps","props":{"name":"maxSteps","id":"maxSteps","type":"number","max":100,"min":5,"step":5,"placeholder":5,"title":"Maximum number of steps per episode before resetting"}},{"label":"Epsilon","props":{"name":"epsilon","id":"epsilon","type":"number","max":1,"min":0,"step":0.1,"placeholder":0,"title":"Probability of random action vs best known action"}},{"label":"Batch Size","props":{"name":"batchSize","id":"batchSize","type":"number","max":200,"min":10,"step":2,"placeholder":10,"title":"Amount of data sampled from replay buffer when training"}}],"train":[{"label":"Episodes","props":{"name":"episodes","id":"episodes","type":"number","max":50000,"min":100,"step":100,"placeholder":100,"title":"Number of epsiodes in the training cycle"}},{"label":"Max Steps","props":{"name":"maxSteps","id":"maxSteps","type":"number","max":100,"min":5,"step":5,"placeholder":5,"title":"Maximum number of steps per episode before resetting"}},{"label":"Batch Size","props":{"name":"batchSize","id":"batchSize","type":"number","max":200,"min":10,"step":2,"placeholder":10,"title":"Amount of data sampled from replay buffer when training"}},{"label":"Epsilon Max","props":{"name":"epsilonMax","id":"epsilonMax","type":"number","max":1,"min":0,"step":0.1,"placeholder":0,"title":"Starting epsilon value (decays from)"}},{"label":"Epsilon Min","props":{"name":"epsilonMin","id":"epsilonMin","type":"number","max":1,"min":0,"step":0.1,"placeholder":0,"title":"Ending epsilon value (decays to)"}}]}')},334:function(e,t,n){},349:function(e,t){},350:function(e,t){},358:function(e,t){},368:function(e,t){},369:function(e,t){},370:function(e,t){},378:function(e,t){},379:function(e,t,n){},380:function(e,t,n){},381:function(e,t,n){},382:function(e,t,n){},391:function(e,t,n){},392:function(e,t,n){},393:function(e,t,n){},394:function(e,t,n){},395:function(e,t,n){},396:function(e,t,n){},397:function(e,t,n){},398:function(e,t,n){"use strict";n.r(t);var r=n(6),a=n(5),s=n(9),i=n(13),c=n(14),o=n(12),u=n.n(o),l=n(130),p=n.n(l),h=n(45),d=n(230),f=n(3),b=n.n(f),m=n(11),j=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"setStateAsync",value:function(e){var t=this;return new Promise((function(n){t.setState(e,(function(){n()}))}))}}]),n}(u.a.Component),v=n(434),O=n(436),y=n(437),x=n(433),k=n(431),g=n(429),w=n(298),S=n.n(w),M=n(296),T=(n(334),n(21)),z={flexGrow:1,textAlign:"center",marginRight:"2.5em"},A=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={mainMenu:null,title:"Welcome"},r}return Object(s.a)(n,[{key:"setMainMenu",value:function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateAsync({mainMenu:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"setTitle",value:function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateAsync({title:t});case 2:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"menuBar",value:function(){var e=this;return Object(T.jsx)(v.a,{position:"static",children:Object(T.jsxs)(O.a,{children:[Object(T.jsx)(y.a,{size:"large",edge:"start",color:"inherit","aria-haspopup":"true","aria-controls":"main-menu",sx:{mr:2},onClick:function(t){return e.setMainMenu(t.currentTarget)},children:Object(T.jsx)(S.a,{})}),Object(T.jsx)(x.a,{variant:"h5",component:"div",sx:z,children:this.state.title})]})})}},{key:"menuItems",value:function(){for(var e=this,t=[],n=function(){var n=Object(r.a)(s[a],2),i=n[0],c=n[1];t.push(Object(T.jsxs)(k.a,{component:d.b,onClick:Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setMainMenu(null);case 2:return t.next=4,e.setTitle(c.title);case 4:case"end":return t.stop()}}),t)}))),to:c.route,children:[" ",c.content]},i))},a=0,s=Object.entries(M);a<s.length;a++)n();return t}},{key:"mainMenu",value:function(){var e=this;return Object(T.jsxs)(g.a,{id:"main-menu",open:Boolean(this.state.mainMenu),anchorEl:this.state.mainMenu,onClose:Object(m.a)(b.a.mark((function t(){return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.setMainMenu(null);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)}))),disableAutoFocusItem:!0,children:[" ",this.menuItems()]})}},{key:"render",value:function(){return Object(T.jsxs)("div",{children:[this.menuBar(),this.mainMenu(),Object(T.jsx)(h.a,{})]})}}]),n}(j),R=n(49),E=n(18),P=n(19),C=n(100),F=function(){function e(t,n,r){Object(a.a)(this,e),this.bufferSize=t,this.gamma=n,this.layers=r,this.reset()}return Object(s.a)(e,[{key:"reset",value:function(){this.mainModel=C.b();var e,t=Object(P.a)(this.layers);try{for(t.s();!(e=t.n()).done;){var n=e.value;this.mainModel.add(C.a.dense(n))}}catch(i){t.e(i)}finally{t.f()}this.mainModel.compile({loss:"meanSquaredError",optimizer:"adam"}),this.targetModel=C.b();var r,a=Object(P.a)(this.layers);try{for(a.s();!(r=a.n()).done;){var s=r.value;this.targetModel.add(C.a.dense(s))}}catch(i){a.e(i)}finally{a.f()}this.updateTargetModel(),this.replayBuffer=[]}},{key:"step",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n){var r,a,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.stateAsTensor(),e.next=3,this.epsilonGreedy(r,t.allowedActions(),n);case 3:return a=e.sent,e.next=6,t.step(a);case 6:return s=e.sent,this.storeTransition(s),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"updateTargetModel",value:function(){for(var e in this.mainModel.layers){var t=this.mainModel.layers[e].getWeights();this.targetModel.layers[e].setWeights(t)}}},{key:"storeTransition",value:function(e){this.replayBuffer.unshift(e),this.replayBuffer.length===this.bufferSize+1&&this.replayBuffer.pop()}},{key:"epsilonGreedy",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n,r){var a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(Math.random()<r)){e.next=3;break}return a=Math.floor(Math.random()*n.length),e.abrupt("return",n[a]);case 3:return s=this.mainModel.predict(t),e.next=6,s.argMax(-1).dataSync();case 6:return i=e.sent,e.abrupt("return",i[0]);case 8:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"trainModel",value:function(){var e=Object(m.a)(b.a.mark((function e(t){var n,r,a,s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(this.replayBuffer.length<t)){e.next=2;break}return e.abrupt("return");case 2:n=Object(P.a)(this.miniBatch(t)),e.prev=3,n.s();case 5:if((r=n.n()).done){e.next=15;break}return a=r.value,s=a.reward,a.done||(s+=this.gamma*this.targetValue(a.nextState)),(i=this.mainModel.predict(a.state).arraySync())[0][a.action.enumOrdinal]=s,e.next=13,this.mainModel.fit(a.state,C.c(i),{epochs:1,batchSize:1,shuffle:!1});case 13:e.next=5;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:case"end":return e.stop()}}),e,this,[[3,17,20,23]])})));return function(t){return e.apply(this,arguments)}}()},{key:"miniBatch",value:function(e){if(e>=this.replayBuffer.length){var t=Object(E.a)(this.replayBuffer);return C.d.shuffle(t),t}for(var n=this.replayBuffer.length,r=new Set;r.size!=e;){var a=Math.floor(Math.random()*n);r.add(this.replayBuffer[a])}return r}},{key:"targetValue",value:function(){var e=Object(m.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.mainModel.predict(t),r=this.targetModel.predict(t),e.next=4,n.argMax(-1).data();case 4:return a=e.sent,e.abrupt("return",r.arraySync()[0][a[0]]);case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function B(e){return new Promise((function(t){return setTimeout(t,parseInt(e))}))}var N=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;Object(a.a)(this,n),r=t.call(this,e);var s=e.params.bufferSize,i=e.params.gamma,c=e.params.layers;return r.dqn=new F(s,i,c),r}return Object(s.a)(n,[{key:"fullyTrain",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n,r,a,s,i){var c,o,u;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=(a-s)/t,o=a,u=0;case 3:if(!(u<t)){e.next=12;break}return e.next=6,this.setStateAsync({currentEpisode:u+1});case 6:return e.next=8,this.singleEpisode(n,o,r,i);case 8:o>s&&(o=(a-s)*Math.exp(-c*u)+s);case 9:u++,e.next=3;break;case 12:this.dqn.updateTargetModel();case 13:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a,s,i){return e.apply(this,arguments)}}()},{key:"singleEpisode",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n,r,a){var s,i;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=0;case 1:if(!(s<t)){e.next=15;break}return e.next=4,this.dqn.step(this.game,n);case 4:return i=e.sent,e.next=7,this.setStateAsync({currentStep:s+1});case 7:return e.next=9,B(a);case 9:if(this.forceUpdate(),!i.done){e.next=12;break}return e.abrupt("break",15);case 12:s++,e.next=1;break;case 15:return e.next=17,this.game.reset();case 17:return e.next=19,this.dqn.trainModel(r);case 19:this.dqn.updateTargetModel();case 20:case"end":return e.stop()}}),e,this)})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"singleStep",value:function(){var e=Object(m.a)(b.a.mark((function e(t,n,r){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dqn.step(this.game,t);case 2:if(a=e.sent,console.log(a),!a.done){e.next=9;break}return e.next=7,this.game.reset();case 7:return e.next=9,this.dqn.trainModel(r);case 9:n&&this.dqn.updateTargetModel();case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"reset",value:function(){this.dqn.reset()}}]),n}(j),I=n(240),D=n(40),H=n(321),G=(n(379),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={mode:"step",epsilon:.5,epsilonMax:1,epsilonMin:0,maxSteps:20,updateTarget:!1,episodes:1e3,batchSize:32,running:!1,stepDelay:500},r.handleInputChange=r.handleInputChange.bind(Object(R.a)(r)),r.handleModeSelectChange=r.handleModeSelectChange.bind(Object(R.a)(r)),r.handlePlayButtonPress=r.handlePlayButtonPress.bind(Object(R.a)(r)),r.handleResetButtonPress=r.handleResetButtonPress.bind(Object(R.a)(r)),r}return Object(s.a)(n,[{key:"handleInputChange",value:function(){var e=Object(m.a)(b.a.mark((function e(t){var n,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.target,r="checkbox"===n.type?n.checked:n.value,a=n.name,e.next=5,this.setStateAsync(Object(D.a)({},a,r));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handleModeSelectChange",value:function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.handleInputChange(t);case 2:return e.next=4,this.props.onModeSelect(this.state.mode);case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"handlePlayButtonPress",value:function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateAsync({running:!0});case 2:return e.next=4,this.props.onPlay(Object.freeze(Object(I.a)({},this.state)));case 4:return e.next=6,this.setStateAsync({running:!1});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"handleResetButtonPress",value:function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateAsync({running:!1,currentStep:0,currentEpisode:0});case 2:return e.next=4,this.props.onReset();case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"createControlsForMode",value:function(){var e,t=[],n=Object(P.a)(H[this.state.mode]);try{for(n.s();!(e=n.n()).done;){var r=e.value,a=r.props,s=r.label,i=a.name,c=a.title;t.push(this.createLabel(s,i,c)),t.push(this.createInput(a))}}catch(o){n.e(o)}finally{n.f()}return Object(T.jsx)("div",{id:"mode-controls",children:t})}},{key:"createLabel",value:function(e,t,n){return Object(T.jsxs)("label",{className:"control",htmlFor:t,title:n,id:"".concat(t,"-label"),children:["".concat(e,":"),"\xa0"]},"".concat(t,"-label"))}},{key:"createInput",value:function(e){var t=e.name,n=this.handleInputChange,r=this.state[t],a=t+"-input",s=Object(I.a)(Object(I.a)({},e),{},{className:"control labeled",onChange:n,value:r,key:a});return u.a.createElement("input",s)}},{key:"render",value:function(){return Object(T.jsxs)("div",{id:"controls-box",children:[Object(T.jsxs)("div",{id:"static-controls",children:[Object(T.jsxs)("select",{className:"control",id:"mode-select",name:"mode",title:"Mode select",onChange:this.handleModeSelectChange,defaultValue:"step",children:[Object(T.jsx)("option",{value:"step",children:"Single Step"}),Object(T.jsx)("option",{value:"episode",children:"Single Episode"}),Object(T.jsx)("option",{value:"train",children:"Multiple Episodes"})]}),Object(T.jsx)("button",{className:"control",id:"play-button",title:"Run",disabled:this.state.running,onClick:this.handlePlayButtonPress,children:"\u25b6"}),Object(T.jsx)("button",{className:"control",id:"reset-button",title:"Reset",disabled:this.state.running,onClick:this.handleResetButtonPress,children:"\u21ba"}),Object(T.jsx)("label",{className:"control",htmlFor:"stepDelay",id:"step-delay-label",title:"Delay between steps (ms)",children:"Delay:\xa0"}),Object(T.jsx)("input",{className:"control labeled",name:"stepDelay",id:"stepDelay",title:"Delay between steps (ms)",onChange:this.handleInputChange,value:this.state.stepDelay,type:"number",max:"5000",min:"100",step:"100"})]}),this.createControlsForMode()]})}}]),n}(j)),q=(n(380),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"showCurrentStep",value:function(){var e=this.props.mode;if("episode"===e||"train"===e)return Object(T.jsxs)("h3",{id:"counter-step",children:["Step: ",this.props.step]})}},{key:"showCurrentEpisode",value:function(){if("train"===this.props.mode)return Object(T.jsxs)("h3",{id:"counter-episode",children:["Episode: ",this.props.episode]})}},{key:"render",value:function(){return Object(T.jsxs)("div",{style:{clear:"both"},id:"counter-counts",children:[this.showCurrentStep(),this.showCurrentEpisode()]})}}]),n}(u.a.Component)),L=(n(381),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).state={currentStep:0,currentEpisode:0,controlMode:"step"},r.onPlay=r.onPlay.bind(Object(R.a)(r)),r.onReset=r.onReset.bind(Object(R.a)(r)),r.onModeSelect=r.onModeSelect.bind(Object(R.a)(r)),r}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.component;this.game=e.ref.current}},{key:"onPlay",value:function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.mode,e.next="step"===e.t0?3:"episode"===e.t0?6:"train"===e.t0?9:12;break;case 3:return e.next=5,this.singleStep(t.epsilon,t.updateTarget,t.batchSize);case 5:return e.abrupt("break",13);case 6:return e.next=8,this.singleEpisode(t.maxSteps,t.epsilon,t.batchSize,t.stepDelay);case 8:return e.abrupt("break",13);case 9:return e.next=11,this.fullyTrain(t.episodes,t.maxSteps,t.batchSize,t.epsilonMax,t.epsilonMin,t.stepDelay);case 11:case 12:return e.abrupt("break",13);case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"onReset",value:function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateAsync({currentStep:0,currentEpisode:0});case 2:return e.next=4,this.game.reset();case 4:this.reset();case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"onModeSelect",value:function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateAsync({currentStep:0,currentEpisode:0,controlMode:t});case 2:return e.next=4,this.game.reset();case 4:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(T.jsxs)("div",{children:[Object(T.jsx)("div",{id:"game-controls-container",children:Object(T.jsx)(G,{onPlay:this.onPlay,onReset:this.onReset,onModeSelect:this.onModeSelect})}),Object(T.jsx)("div",{id:"game-container",children:this.props.component}),Object(T.jsx)("div",{id:"game-counter-container",children:Object(T.jsx)(q,{mode:this.state.controlMode,step:this.state.currentStep,episode:this.state.currentEpisode})})]})}}]),n}(N)),W=(n(382),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(T.jsx)("div",{id:"welcome",children:Object(T.jsx)("h1",{children:"Welcome!"})})}}]),n}(u.a.Component)),U=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"opposite",value:function(){switch(this.enumKey){case"UP":return n.DOWN;case"DOWN":return n.UP;case"LEFT":return n.RIGHT;case"RIGHT":return n.LEFT;default:console.error("Action '".concat(this.enumKey,"' doesn't have an opposite"))}}}],[{key:"fromOrdinal",value:function(e){switch(e){case n.UP.enumOrdinal:return n.UP;case n.DOWN.enumOrdinal:return n.DOWN;case n.LEFT.enumOrdinal:return n.LEFT;case n.RIGHT.enumOrdinal:return n.RIGHT;default:console.error("Not an Action: ".concat(e))}}}]),n}(n(322).Enumify);U.UP=new U,U.DOWN=new U,U.LEFT=new U,U.RIGHT=new U,U._=U.closeEnum();var J=function e(t,n,r,s,i,c){Object(a.a)(this,e),this.action=t,this.state=n,this.reward=r,this.done=s,this.nextState=i,this.allowedActions=c},V=function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"reset",value:function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"allowedActions",value:function(){}},{key:"step",value:function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"stateAsTensor",value:function(){}}]),n}(j),K=n(251),X=(n(391),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=this.props.type,t=[K.classes[e]||"","cell-grid-item"].join(" "),n=K.titles[e],r=this.props.populated?"\uc6c3":e;return Object(T.jsx)("div",{className:t,title:n,children:r})}}]),n}(u.a.Component)),_=(n(392),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){var e=[];for(var t in this.props.boardData){var n=this.props.boardData[t],r=parseInt(t),a=r===this.props.location;e.push(Object(T.jsx)(X,{type:n,populated:a},t)),(r+1)%this.props.rowSize===0&&e.push(Object(T.jsx)("br",{},"".concat(t,"-br")))}return Object(T.jsx)("div",{id:"board-grid",children:e})}}]),n}(u.a.Component)),Q=(n(393),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).board=Object.freeze(["S","F","F","F","F","H","F","H","F","F","F","H","H","F","F","G"]),r.state={location:0},r.prevAction=U.RIGHT,r}return Object(s.a)(n,[{key:"reset",value:function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.setStateAsync({location:0});case 2:this.prevAction=U.RIGHT;case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allowedActions",value:function(){var e=this.prevAction.opposite(),t=this.state.location,n=t%4,r=Math.floor(t/4),a=[];return n>0&&e!==U.LEFT&&a.push(U.LEFT.enumOrdinal),n<3&&e!==U.RIGHT&&a.push(U.RIGHT.enumOrdinal),r>0&&e!==U.UP&&a.push(U.UP.enumOrdinal),r<3&&e!==U.DOWN&&a.push(U.DOWN.enumOrdinal),a}},{key:"step",value:function(){var e=Object(m.a)(b.a.mark((function e(t){var n,r,a,s,i,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=U.fromOrdinal(t),r=this.stateAsTensor(),(a=this.allowedActions()).includes(t)){e.next=5;break}return e.abrupt("return",new J(n,r,-1,!0,r,a));case 5:s=this.state.location,i=s%4,c=Math.floor(s/4),e.t0=n,e.next=e.t0===U.UP?11:e.t0===U.DOWN?13:e.t0===U.LEFT?15:e.t0===U.RIGHT?17:19;break;case 11:return c--,e.abrupt("break",20);case 13:return c++,e.abrupt("break",20);case 15:return i--,e.abrupt("break",20);case 17:return i++,e.abrupt("break",20);case 19:return e.abrupt("break",20);case 20:return e.next=22,this.setStateAsync({location:4*c+i});case 22:return this.prevAction=n,e.abrupt("return",new J(n,r,this.reward(),this.done(),this.stateAsTensor(),a));case 24:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"reward",value:function(){var e=this.state.location;switch(this.board[e]){case"G":return 1;case"H":return-1;case"F":case"S":default:return 0}}},{key:"done",value:function(){var e=this.state.location,t=this.board[e];return"G"===t||"H"===t}},{key:"stateAsTensor",value:function(){var e=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return e[this.state.location]=1,C.c([e])}},{key:"render",value:function(){return Object(T.jsx)(_,{boardData:this.board,location:this.state.location,rowSize:4})}}]),n}(V)),Y=[[[0,0],[0,1],[0,2]],[[1,0],[1,1],[1,2]],[[2,0],[2,1],[2,2]],[[0,0],[1,0],[2,0]],[[0,1],[1,1],[2,1]],[[0,2],[1,2],[2,2]],[[0,0],[1,1],[2,2]],[[0,2],[1,1],[2,0]]],Z=function(){function e(t){Object(a.a)(this,e),this.board=t||[[" "," "," "],[" "," "," "],[" "," "," "]]}return Object(s.a)(e,[{key:"reset",value:function(){this.board=[[" "," "," "],[" "," "," "],[" "," "," "]]}},{key:"legalMoves",value:function(){var e=[];for(var t in Object.entries(this.board)){var n=Object(r.a)(t,2),a=n[0],s=n[1];for(var i in Object.entries(s)){var c=Object(r.a)(i,2),o=c[0];" "===c[1]&&e.push([a,o])}}return e}},{key:"isWinner",value:function(e){var t,n=this,r=Object(P.a)(Y);try{for(r.s();!(t=r.n()).done;){if(t.value.map((function(t){var r=t[0],a=t[1];return n.board[r][a]===e})).every((function(e){return e})))return!0}}catch(a){r.e(a)}finally{r.f()}return!1}},{key:"makeMove",value:function(e,t){var n=e[0],r=e[1];this.board[n][r]=t}},{key:"clone",value:function(){return new e([Object(E.a)(this.board[0]),Object(E.a)(this.board[1]),Object(E.a)(this.board[2])])}}]),e}(),$=(n(394),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"row",value:function(e){var t=this.props.cells[e];return Object(T.jsxs)("tr",{children:[Object(T.jsx)("td",{className:"board-cell",children:t[0]}),Object(T.jsx)("td",{className:"board-cell",children:t[1]}),Object(T.jsx)("td",{className:"board-cell",children:t[2]})]})}},{key:"render",value:function(){return Object(T.jsx)("table",{children:Object(T.jsxs)("tbody",{children:[this.row(0),this.row(1),this.row(2)]})})}}]),n}(u.a.Component)),ee=(n(395),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).game=new Z,r.state={cells:r.game.board},r}return Object(s.a)(n,[{key:"reset",value:function(){var e=Object(m.a)(b.a.mark((function e(){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.game.reset(),e.next=3,this.setStateAsync({cells:this.game.board});case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"allowedActions",value:function(){return this.game.legalMoves().map((function(e){return 3*e[0]+e[1]}))}},{key:"step",value:function(){var e=Object(m.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:"stateAsTensor",value:function(){var e=this.game.board[0].concat(this.game.board[1]).concat(this.game.board[2]),t={" ":0,X:1,O:2};return C.c([e.map((function(e){return t[e]}))])}},{key:"render",value:function(){return Object(T.jsx)($,{cells:this.state.cells})}}]),n}(V)),te=(n(396),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(){return Object(a.a)(this,n),t.apply(this,arguments)}return Object(s.a)(n,[{key:"render",value:function(){return Object(T.jsx)("div",{id:"snake",children:Object(T.jsx)("h1",{children:"Snake"})})}}]),n}(V)),ne=n(252),re=(n(397),function(e){Object(i.a)(n,e);var t=Object(c.a)(n);function n(e){var r;return Object(a.a)(this,n),(r=t.call(this,e)).frozenLakeRef=u.a.createRef(),r.ticTacToeRef=u.a.createRef(),r.snakeRef=u.a.createRef(),r}return Object(s.a)(n,[{key:"childRoutes",value:function(e){for(var t={frozenLake:Object(T.jsx)(Q,{ref:this.frozenLakeRef}),ticTacToe:Object(T.jsx)(ee,{ref:this.ticTacToeRef}),snake:Object(T.jsx)(te,{ref:this.snakeRef})},n=[],a=0,s=Object.entries(ne);a<s.length;a++){var i=Object(r.a)(s[a],2),c=i[0],o=i[1];n.push(Object(T.jsx)(h.b,{path:e+o.url,element:Object(T.jsx)(L,{params:o.dqnParams,component:t[c]})},c))}return n}},{key:"routingTree",value:function(e,t){return Object(T.jsxs)(h.b,{exact:!0,path:e,element:Object(T.jsx)(A,{}),children:[Object(T.jsx)(h.b,{path:e,element:Object(T.jsx)(W,{})}),this.childRoutes(e)]},t)}},{key:"render",value:function(){var e=this;return Object(T.jsx)(d.a,{children:Object(T.jsx)(h.d,{children:ne.parentRoutes.map((function(t,n){return e.routingTree(t,n)}))})})}}]),n}(u.a.Component)),ae=document.getElementById("root");p.a.render(Object(T.jsx)(re,{}),ae)}},[[398,1,2]]]);
//# sourceMappingURL=main.bd50d20c.chunk.js.map